<html>
<head>
<meta charset="UTF-8">
<title><%= title %></title>
<link href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
<div data-role="page" id="mainMenuPage">
  <div data-role="header">
    <h1><%= title %></h1>
  </div>
  <div data-role="content">
    <div data-role="controlgroup">
        <a href="#uploadInvoicePage" data-role="button">Upload Invoice</a>
        <a href="#metroViewPage" data-role="button" id="mainMenuMetroButton">Manage Invoices</a>
        <a href="#aboutPage" data-role="button">About</a>
    </div>
  </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>
<!-- Page Break -->
<!-- Start of Upload Invoice Page -->
<div data-role="page" id="uploadInvoicePage">
  <div data-role="header">
	<a href="#mainMenuPage" data-role="button" data-icon="back">Back</a>
    <h1>Header</h1>
  </div>
  <div data-role="content">
    <div data-role="fieldcontain">
      <label for="textinput">Text Input:</label>
      <input type="text" name="textinput" id="textinput" value=""  />
    </div>
    <div data-role="fieldcontain">
      <label for="textinput">Text Input:</label>
      <input type="text" name="textinput" id="textinput" value=""  />
    </div>
  Content </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>
<!-- Page Break -->

<div data-role="page" id="viewCities">
  <div data-role="header">
  <a href="#mainMenuPage" data-role="button" data-icon="back">Back</a>
    <h1>Cities</h1>
  </div>
  <div data-role="content">
    Some cool content
  </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>

<!-- About page -->

<div data-role="page" id="aboutPage">
  <div data-role="header">
  <a href="#mainMenuPage" data-role="button" data-icon="back">Back</a>
    <h1>Header</h1>
  </div>
  <div data-role="content">
    Content
  </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>
</body>

<!-- Start of Invoice Management Page -->
<div data-role="page" id="metroViewPage">
  <div data-role="header">
	<a href="#mainMenuPage" data-role="button" data-icon="back">Back</a>
    <h1>Manage Invoices</h1>
    
  </div>
  <div data-role="content">
  	<h1>Metropolitan Areas</h1>
    <hr>
    
    <div id="invoiceItems">

  </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>
<!-- Page to view cities -->




<!-- End of cities page -->


<script type="text/javascript">
// This script loads data into a Metropolitan class, and then renders it to the view when the mainMenuMetro button is pushed
var metroItems = [];
class Metropolitan {
  constructor (name, id, cities, population) {
      this.name = name;
      this.id = id;
      this.cities = cities;
      this.population = population;
  }
}
  $('#mainMenuMetroButton').click(function(){
      $.get("/metropolitan", function(data, status){
         // Load data into variables
        var html = '';
        for (var i=0; i < data.length; i++) {
            var metroItemToInsert = new Metropolitan(data[i].name, data[i].id, data[i].cities, data[i].population);
            metroItems.push(metroItemToInsert);
            html +=  '<div onclick="clicked(this);" id="invoiceItem' + i + '" ><h2>' + metroItemToInsert.name + '</h2>';
            html += '<h3>Cities: ' + metroItemToInsert.cities + '</h3>';
            html += '<h3>Population: ' + metroItemToInsert.population + '</h3><hr></div>';

        }
        $('#invoiceItems').html(html);
    });
  });
</script>
<script type="text/javascript">
function clicked(item) {
   console.log($(item).attr("id"));
}
</script>
</html>

